<%
const pick = (obj) => {
    if (obj === null || obj === undefined) return '';
    if (typeof obj === 'string' || typeof obj === 'number') return String(obj);
    const order = [lang, 'ja', 'en', 'zh'];
    for (let i = 0; i < order.length; i++) {
        const key = order[i];
        if (Object.prototype.hasOwnProperty.call(obj, key)) {
            const val = obj[key];
            if (val !== undefined && val !== null) return String(val);
        }
    }
    return '';
};
const headerData = site.header || {};
const navItems = headerData.navItems || [];
const navAnchors = ['#section01', '#section02', '#section03', '#section05', '#section06', '#section07', '#section08', '#section09'];
const headerLogoMap = {
    ja: './images/header_logo_ja.svg',
    en: './images/header_logo_en.svg',
    zh: './images/header_logo_ch.svg',
};
const headerLogo = headerLogoMap[lang] || './images/logo.svg';
%>
    <header class="header">
        <div class="header_inner">
            <h1 class="header_logo">
                <a href="/">
                <img src="<%= headerLogo %>" alt="<%= pick(headerData.logoAlt) %>" />
            </a>
            </h1>

            <nav class="header_nav header__nav">
                <div class="contact_sp">
                    <p class="contact_sp_title">
                        <%= pick(headerData.contactSpTitle) %>
                    </p>
                    <div>
                        <a class="contact_sns" href="#" onclick="alert('Comming soon...'); return false;">
                            <img src="./images/line_icon.svg" alt="Line 繧｢繧､繧ｳ繝ｳ" />
                            <p>LINE</p>
                        </a>
                        <a class="contact_sns" href="https://u.wechat.com/EOM2LR1ErOIhdV3MYAuFMhY?s=4" target="_blank" rel="noopener noreferrer">
                            <img src="./images/wechat_icon.svg" alt="WeChat 繧｢繧､繧ｳ繝ｳ" />
                            <p>WeChat</p>
                        </a>
                    </div>
                </div>
                <ul class="header_nav_list">
                    <% navItems.forEach(function(item, index) { const href = navAnchors[index] || '#'; %>
                        <li class="header_nav_item">
                            <a href="<%= href %>">
                                <%= pick(item.label) %>
                            </a>
                        </li>
                        <% }) %>
                </ul>
                <div class="header_nav_lang">
                    <%- include('./language-switcher', { lang }) %>
                </div>
            </nav>

            <button class="header_burger" type="button" aria-label="Toggle navigation" aria-expanded="false">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
        <div class="header_overlay"></div>



    </header>

