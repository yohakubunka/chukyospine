<%
const pick = (obj) => {
    if (obj === null || obj === undefined) return '';
    if (typeof obj === 'string' || typeof obj === 'number') return String(obj);
    const order = [lang, 'ja', 'en', 'zh'];
    for (let i = 0; i < order.length; i++) {
        const key = order[i];
        if (Object.prototype.hasOwnProperty.call(obj, key)) {
            const val = obj[key];
            if (val !== undefined && val !== null) return String(val);
        }
    }
    return '';
};
const headerData = site.header || {};
const navItems = headerData.navItems || [];
const navAnchors = ['#section01', '#section02', '#section03', '#section05', '#section06', '#section07', '#section08', '#section09'];
%>
    <header class="header">
        <div class="header_inner">
            <h1 class="header_logo">
                <a href="/">
                <img src="/images/logo.svg" alt="<%= pick(headerData.logoAlt) %>" />
            </a>
            </h1>

            <nav class="header_nav header__nav">
                <ul class="header_nav_list">
                    <% navItems.forEach(function(item, index) { const href = navAnchors[index] || '#'; %>
                        <li class="header_nav_item">
                            <a href="<%= href %>">
                                <%= pick(item.label) %>
                            </a>
                        </li>
                        <% }) %>
                </ul>
            </nav>
            <%- include('./language-switcher', { lang }) %>

                <button class="header_burger" type="button" aria-label="Toggle navigation" aria-expanded="false">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
        <div class="header_overlay"></div>

        <div class="contact_wrap">
            <img src="/images/doctor.png" alt="院長の写真" class="doctor_image" />
            <div class="contact_us">
                <p class="contact_title"><%= pick(headerData.contactTitle) %></p>
                <div class="contact_sns_wrap">
                    <a class="contact_sns" href="##">
                        <img src="/images/line_icon.svg" alt="Line アイコン" />
                        <p>LINE</p>
                    </a>
                    <img src="/images/sns_line.svg" alt="" />
                    <a class="contact_sns" href="##">
                        <img src="/images/wechat_icon.svg" alt="WeChat アイコン" />
                        <p>WeChat</p>
                    </a>
                </div>
            </div>
        </div>

        <div class="scroll_down_wrap">
            <p class="scroll_down_text">SCROLL<br>DOWN</p>
            <div class="scroll_icon"></div>
        </div>
    </header>
