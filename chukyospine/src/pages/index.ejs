<!DOCTYPE html>
<html lang="<%= lang %>">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
        <%= site.title %>
    </title>
    <meta name="description" content="<%= site.description %>" />
    <!-- OGP?Open Graph Protocol? -->
    <meta property="og:title" content="<%= site.title %>" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="<%= site.url %>" />
    <!-- <meta property="og:image" content="[???URL]"> -->
    <meta property="og:site_name" content="<%= site.title %>" />
    <meta property="og:description" content="<%= site.description %>" />
    <meta property="og:locale" content="ja_JP" />
    <script>
        (function (d) {
            var config = {
                kitId: 'ujv2rms',
                scriptTimeout: 3000,
                async: true
            },
                h = d.documentElement, t = setTimeout(function () { h.className = h.className.replace(/\bwf-loading\b/g, "") + " wf-inactive"; }, config.scriptTimeout), tk = d.createElement("script"), f = false, s = d.getElementsByTagName("script")[0], a; h.className += " wf-loading"; tk.src = 'https://use.typekit.net/' + config.kitId + '.js'; tk.async = true; tk.onload = tk.onreadystatechange = function () { a = this.readyState; if (f || a && a != "complete" && a != "loaded") return; f = true; clearTimeout(t); try { Typekit.load(config) } catch (e) { } }; s.parentNode.insertBefore(tk, s)
        })(document);
    </script>

    <link rel="stylesheet" href="./css/style.css" />
</head>

<body>
    <%- include('../components/header') %>
        <main class="main">
            <!-- <%- include('../components/mainvisual') %> -->

            <% const pick=(obj)=> {
                if (!obj) return '';
                if (typeof obj === 'string') return obj;
                const candidates = [obj[lang], obj.ja, obj.en, obj.zh, ...Object.values(obj)];
                return candidates.find((v) => v) || '';
                };
                const brText = (obj) => {
                const val = pick(obj);
                return val ? val.replace(/\\n/g, '<br>').replace(/\n/g, '<br>') : '';
                };
                const idx = site.index || {};
                const clinical = idx.clinicalOutcomes || {};
                const policy = idx.policy || {};
                const goal = policy.goal || {};
                const approaches = idx.approachItems || [];
                const treatmentMenu = idx.treatmentMenu || {};
                const benefits = treatmentMenu.benefits || [];
                const procedures = idx.procedures || [];
                const block = idx.blockInjection || {};
                const flow = idx.flow || {};
                const pricing = idx.pricing || {};
                const doctor = idx.doctor || {};
                const access = idx.access || {};
                const hours = idx.hours || {};
                const pricingRows = pricing.rows || [];
                const pricingHeaders = pricing.headers || [];
                const notes = pricing.notes || [];
                const blockTypes = block.types || [];
                const bulletTrainRoutes = access.bulletTrainRoutes || [];
                const legendItems = access.legend || [];
                const proc0 = procedures[0] || {};
                const proc1 = procedures[1] || {};
                const proc2 = procedures[2] || {};
                const proc3 = procedures[3] || {};
                %>

                <section id="section01">
                    <div class="page-width clinical_wrap">
                        <div class="clinical_title">
                            <%- brText(clinical.title) %>
                        </div>
                        <div class="clinical_desc">
                            <p class="clinical_desc_top">
                                <%= pick(clinical.lead) %>
                            </p>
                            <p class="clinical_desc_middle">
                                <%= pick(clinical.casesPrefix) %><span class="clinical_cases_number">
                                        <%= pick(clinical.casesNumber) %>
                                    </span><span class="clinical_cases_unit">
                                        <%= pick(clinical.casesUnit) %>
                                    </span>
                                    <%= pick(clinical.casesSuffix) %>
                            </p>
                            <p class="clinical_approach">
                                <%= pick(clinical.approach) %>
                            </p>
                            <div class="clinical_services">
                                <p class="clinical_services_title">
                                    <%= pick(clinical.servicesTitle) %>
                                </p>
                                <div class="clinical_services_list">
                                    <% (clinical.services || []).forEach(function(service) { %>
                                        <div class="clinical_service_item">
                                            <%= pick(service) %>
                                        </div>
                                        <% }) %>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <section id="section02">
                    <div class="policy_wrap">
                        <img class="" src="/images/facility.png" alt="<%= pick(policy.imageAlt) %>"
                            aria-hidden="true" />
                        <div class="policy_text">
                            <h2>
                                <%= pick(policy.title) %>
                            </h2>
                            <p class="policy_lead">
                                <%= pick(policy.lead) %>
                            </p>
                            <p class="policy_goal">
                                <%= pick(goal.prefix) %><span class="policy_goal_highlight">
                                        <%= pick(goal.highlight) %>
                                    </span>
                                    <%= pick(goal.suffix) %>
                            </p>
                            <p class="policy_body">
                                <%= pick(policy.body) %>
                            </p>
                        </div>
                    </div>
                    <div class="page-width approach_wrap">
                        <h2 class="medium_title">
                            <%= pick(idx.approachTitle) %>
                        </h2>
                        <div class="approach_items">
                            <img class="" src="/images/treatment-main.svg" alt="" aria-hidden="true" />
                            <div class="approach_item_list">
                                <% approaches.forEach(function(item, i) { const iconNum=String(i + 1).padStart(2, '0' );
                                    %>
                                    <div class="approach_item">
                                        <img class="" src="/images/treatment-icon<%= iconNum %>.svg" alt=""
                                            aria-hidden="true" />
                                        <p class="approach_item_title">
                                            <%= pick(item.title) %>
                                        </p>
                                        <p class="approach_item_body">
                                            <%= pick(item.body) %>
                                        </p>
                                    </div>
                                    <% }) %>
                            </div>
                        </div>
                    </div>
                </section>

                <section id="section03">
                    <div class="page-width treatment_menu_wrap">
                        <h2 class="medium_title">
                            <%= pick(treatmentMenu.title) %>
                        </h2>
                        <div class="treatment_menu_content">
                            <div class="endoscopy_section">
                                <div class="icon_title_wrap">
                                    <div class="back_icon">
                                        <img class="" src="/images/details_icon.svg" alt="" aria-hidden="true" />
                                    </div>
                                    <div class="icon_title_text">
                                        <h3>
                                            <%= pick(treatmentMenu.endoscopyTitle) %>
                                        </h3>
                                        <p class="icon_subtitle">
                                            <%= pick(treatmentMenu.endoscopySubTitle) %>
                                        </p>
                                    </div>
                                </div>
                                <%- brText(treatmentMenu.endoscopyBody) %>
                            </div>


                            <img class="" src="/images/details.svg" alt="" aria-hidden="true" />
                        </div>

                        <div class="treatment_benefits">
                            <h3 class="treatment_benefits_title">
                                <%= pick(treatmentMenu.benefitsTitle) %>
                            </h3>
                            <div class="treatment_benefits_items">
                                <% benefits.forEach(function(benefit, i) { const iconNum=['time','blood','runman'][i]
                                    || 'time' ; const itemClass=`treatment_benefit_item
                                    treatment_benefit_item_${iconNum}`; %>
                                    <div class="<%= itemClass %>">
                                        <img class="" src="/images/<%= iconNum %>-icon.svg" alt="" aria-hidden="true" />
                                        <p class="title"><%- brText(benefit.title) %></p>
                                        <% (benefit.lines || []).forEach(function(line) { %>
                                            <p class="caution">
                                                <%= pick(line) %>
                                            </p>
                                            <% }) %>
                                    </div>
                                    <% }) %>
                            </div>
                        </div>

                        <div class="procedures_section">
                            <div class="procedures_wrap">
                                <div class="number_title">
                                    <img class="num_img" src="/images/num_01.svg" alt="" aria-hidden="true" />
                                    <img class="" src="/images/line.svg" alt="" aria-hidden="true" />
                                    <p>
                                        <%= pick(proc0.title) %>
                                    </p>
                                </div>
                                <div class="procedure_approaches">
                                    <% (proc0.approaches || []).forEach(function(app, i) { const imgNum=i===0 ? '01'
                                        : '02' ; %>
                                        <div class="procedure_approach_item">
                                            <p class="procedure_approach_title">
                                                <%= pick(app.title) %>
                                            </p>
                                            <p class="procedure_approach_method">
                                                <%= pick(app.method) %>
                                            </p>
                                            <img class="procedure_approach_img"
                                                src="/images/number_image_<%= imgNum %>.svg" alt=""
                                                aria-hidden="true" />
                                            <p class="procedure_approach_desc"><%- brText(app.description) %></p>
                                            <div class="procedure_approach_time">
                                                <img class="" src="/images/clock.svg" alt="" aria-hidden="true" />
                                                <p>
                                                    <%= pick(app.time) %>
                                                </p>
                                            </div>
                                        </div>
                                        <% }) %>
                                </div>
                            </div>

                            <div class="procedures_wrap procedures_wrap_single">
                                <div>
                                    <div class="number_title">
                                        <img class="num_img" src="/images/num_02.svg" alt="" aria-hidden="true" />
                                        <img class="" src="/images/line.svg" alt="" aria-hidden="true" />
                                        <p>
                                            <%= pick(proc1.title) %>
                                        </p>
                                    </div>

                                    <% (proc1.approaches || []).forEach(function(app) { %>
                                        <p class="procedures_single_title">
                                            <%= pick(app.title) %>
                                        </p>
                                        <p class="procedures_single_method">
                                            <%= pick(app.method) %>
                                        </p>

                                        <p class="procedures_single_desc"><%- brText(app.description) %></p>
                                        <div class="procedures_single_time">
                                            <img class="" src="/images/clock.svg" alt="" aria-hidden="true" />
                                            <p>
                                                <%= pick(app.time) %>
                                            </p>
                                        </div>
                                        <% }) %>
                                </div>

                                <div>
                                    <img class="" src="/images/number_image_03.svg" alt="" aria-hidden="true" />
                                </div>
                            </div>

                            <div class="procedures_wrap procedures_wrap_single">
                                <div class="">
                                    <div class="number_title">
                                        <img class="num_img" src="/images/num_03.svg" alt="" aria-hidden="true" />
                                        <img class="" src="/images/line.svg" alt="" aria-hidden="true" />
                                        <p><%- brText(proc2.title) %> </p>
                                    </div>

                                    <% (proc2.approaches || []).forEach(function(app) { %>
                                        <p class="procedures_single_title">
                                            <%= pick(app.title) %>
                                        </p>
                                        <p class="procedures_single_method">
                                            <%= pick(app.method) %>
                                        </p>

                                        <p class="procedures_single_desc"><%- brText(app.description) %></p>
                                        <div class="procedures_single_time">
                                            <img class="" src="/images/clock.svg" alt="" aria-hidden="true" />
                                            <p>
                                                <%= pick(app.time) %>
                                            </p>
                                        </div>
                                        <% }) %>
                                </div>
                                <div>
                                    <img class="" src="/images/number_image_04.svg" alt="" aria-hidden="true" />
                                </div>
                            </div>

                            <div class="procedures_wrap procedures_wrap_single">
                                <div>
                                    <div class="number_title">
                                        <img class="num_img" src="/images/num_04.svg" alt="" aria-hidden="true" />
                                        <img class="" src="/images/line.svg" alt="" aria-hidden="true" />
                                        <p>
                                            <%= pick(proc3.title) %>
                                        </p>
                                    </div>

                                    <% (proc3.approaches || []).forEach(function(app) { %>
                                        <p class="procedures_single_title">
                                            <%= pick(app.title) %>
                                        </p>
                                        <p class="procedures_single_method">
                                            <%= pick(app.method) %>
                                        </p>

                                        <p class="procedures_single_desc"><%- brText(app.description) %></p>
                                        <div class="procedures_single_time">
                                            <img class="" src="/images/clock.svg" alt="" aria-hidden="true" />
                                            <p>
                                                <%= pick(app.time) %>
                                            </p>
                                        </div>
                                        <% }) %>
                                </div>
                                <div>
                                    <img class="" src="/images/number_image_05.svg" alt="" aria-hidden="true" />
                                </div>
                            </div>
                        </div>


                    </div>
                </section>

                <section id="section04">
                    <div class="page-width">
                        <div class="icon_title_wrap">
                            <div class="back_icon">
                                <img class="" src="/images/syringe.svg" alt="" aria-hidden="true" />
                            </div>
                            <div class="icon_title_text">
                                <h3>
                                    <%= pick(block.title) %>
                                </h3>
                            </div>
                        </div>

                        <div class="syringe_content">
                            <p><%- brText(block.description) %></p>
                            <img class="" src="/images/syringe_illust.svg" alt="" aria-hidden="true" />
                        </div>
                        <div class="syringe_types">
                            <h3>
                                <%= pick(block.typesTitle) %>
                            </h3>
                            <div class="syringe_type_items">
                                <% blockTypes.forEach(function(item, i) { const num=String(i + 1).padStart(2, '0' );
                                    const altClass=i % 2===0 ? 'syringe_type_item_even' : 'syringe_type_item_odd' ; %>
                                    <div class="syringe_type_item <%= altClass %>">
                                        <img class="" src="/images/nerve_icon_<%= num %>.svg" alt=""
                                            aria-hidden="true" />
                                        <p><%- brText(item) %> </p>
                                    </div>
                                    <% }) %>

                            </div>
                        </div>

                    </div>
                </section>


                <section id="section05">
                    <h2 class="medium_title">
                        <%= pick(flow.title) %>
                    </h2>
                    <p class="flow_desc">
                        <%= pick(flow.description) %>
                    </p>
                    <img class="" src="/images/flow_illust.svg" alt="" aria-hidden="true" />
                </section>


                <section id="section06">
                    <div class="page-width">
                        <h2 class="medium_title">
                            <%= pick(pricing.title) %>
                        </h2>
                        <table class="price-table">
                            <colgroup>
                                <col class="price-col-item" />
                                <col class="price-col-sub" />
                                <col class="price-col-amount" />
                                <col class="price-col-desc" />
                            </colgroup>
                            <thead>
                                <tr>
                                    <th class="price-head" colspan="2">
                                        <%= pick(pricingHeaders[0]) %>
                                    </th>
                                    <th class="price-head price-head-accent">
                                        <%= pick(pricingHeaders[1]) %>
                                    </th>
                                    <th class="price-head price-head-accent">
                                        <%= pick(pricingHeaders[2]) %>
                                    </th>
                                </tr>
                            </thead>

                            <tbody>
                                <% let lastItem='' ; %>
                                    <% pricingRows.forEach(function(row, idx) { const cols=row.columns || []; const
                                        isAlt=idx % 2===0 ? 'price-row' : 'price-row price-row-alt' ; const
                                        subItem=row.subItem; const itemText=row.skipFirstColumn ? lastItem :
                                        pick(cols[0]); if (!row.skipFirstColumn) { lastItem=itemText; } const
                                        amountVal=pick(cols[1]); const descVal=pick(cols[2]); %>
                                        <tr class="<%= isAlt %>">
                                            <% if (!row.skipFirstColumn) { %>
                                                <% if (subItem) { %>
                                                    <td class="price-item" <% if (row.rowspan) { %> rowspan="<%=
                                                            row.rowspan %>"<% } %>>
                                                                <%= itemText %>
                                                    </td>
                                                    <td class="price-item">
                                                        <%= pick(subItem) %>
                                                    </td>
                                                    <% } else { %>
                                                        <td class="price-item" colspan="2" <% if (row.rowspan) { %>
                                                            rowspan="<%= row.rowspan %>"<% } %>>
                                                                    <%= itemText %>
                                                        </td>
                                                        <% } %>
                                                            <% } %>
                                                                <% if (row.skipFirstColumn) { %>
                                                                    <td class="price-item">
                                                                        <%= subItem ? pick(subItem) : '' %>
                                                                    </td>
                                                                    <% } %>
                                                                        <td class="price-amount">
                                                                            <span>
                                                                                <%= amountVal %>
                                                                            </span>
                                                                        </td>
                                                                        <% if (!row.skipFirstColumn) { %>
                                                                            <td class="price-desc" <% if (row.rowspan) {
                                                                                %> rowspan="<%= row.rowspan %>"<% } %>>
                                                                                        <%- brText(descVal) %>
                                                                            </td>
                                                                            <% } %>
                                        </tr>
                                        <% }) %>
                            </tbody>
                        </table>
                        <div class="price_notes">
                            <% notes.forEach(function(note) { %>
                                <p>
                                    <%= pick(note) %>
                                </p>
                                <% }) %>
                        </div>
                    </div>
                </section>

                <section id="section07">
                    <div class="page-width">
                        <h2 class="medium_title">
                            <%= pick(doctor.title) %>
                        </h2>
                        <div class="">
                            <p class="doctor_lead">
                                <%= pick(doctor.philosophyTitle) %>
                            </p>
                            <div class="philosophy_text">
                                <p>
                                    <%- pick(doctor.philosophyText) %>
                                </p>
                            </div>

                            <div class="doctor_content">
                                <div class="doctor_profile">
                                    <img class="" src="/images/master.png" alt="" aria-hidden="true" />
                                    <p>
                                        <%= pick(doctor.name) %>
                                    </p>
                                </div>
                                <div class="doctor_details">
                                    <div class="doctor_message">
                                        <p><%- brText(doctor.message) %></p>
                                    </div>
                                    <div class="doctor_career">
                                        <p class="list_title">
                                            <%= pick(doctor.careerTitle) %>
                                        </p>
                                        <ul class="list_items">
                                            <% (doctor.career || []).forEach(function(item) { %>
                                                <li>
                                                    <span>
                                                        <%= pick(item).split(' ')[0] %></span>
                                                        <p>
                                                        <%= pick(item).split(' ').slice(1).join(' ') %></p></li>
                                            <% }) %>
                                        </ul>
                                    </div>
                                    <div class="doctor_qualifications">
                                        <div class="left">
                                            <p class="list_title"><%= pick(doctor.qualificationTitle) %></p>
                                            <ul class="list_items">
                                                <% (doctor.qualifications || []).forEach(function(item) { %>
                                                    <li><span><%= pick(item).split(' ')[0] %></span><%- brText({ ja:'', en:'', zh: pick(item).split(' ').slice(1).join(' ') }) %></li>
                                                <% }) %>
                                            </ul>
                                        </div>
                                        <div>
                                            <p class="list_title"><%= pick(doctor.membershipTitle) %></p>
                                            <ul class="list_items">
                                                <% (doctor.memberships || []).forEach(function(item) { %>
                                                    <li class="item_line"><%= pick(item) %></li>
                                                <% }) %>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="doctor_certificates">
                                <% (doctor.certificates || []).forEach(function(item, i) { const num = String(i + 1).padStart(2, '0'); %>
                                    <div class="doctor_certificate_item">
                                        <img class="" src="/images/certificate_<%= num %>.png"
                                            alt="" aria-hidden="true" />
                                        <p>
                                            <%= pick(item) %>
                                        </p>
                                    </div>
                                <% }) %>
                            </div>
                        </div>
                    </div>
                </section>


        </main>
        <%- include('../components/footer') %>
            <script src="./js/jquery-3.7.1.min.js" defer></script>
            <script src="./js/gsap.min.js" defer></script>
            <script src="./js/main.js" defer></script>
</body>

</html>
